<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="Photos/dashboard_icon.png" rel="icon" />
    <title>Dashboard</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Orbitron&family=Roboto:wght@100&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
    />
    <link rel="stylesheet" href="CSS/dashboard_design.css" />
  </head>
  <body>
    <div class="container text-center">
      <div class="row main-row">
        <div class="col-sm-12 col-md-12 col-lg-1 col-lg-1"></div>
        <div class="col-sm-12 col-md-12 col-lg-11 col-lg-11">
          <div class="row glassmorphism-search mt-2 mb-2">
            <div class="col-sm-12 col-md-12 col-lg-4 col-xl-4">
              <div class="input-group mt-2 mb-2">
                <span
                  class="glassmorphism-search-input input-group-text bi bi-google"
                ></span>
                <input
                  type="text"
                  id="search_input"
                  class="glassmorphism-search-input form-control"
                  placeholder="Search on Google"
                />
              </div>
            </div>
            <div class="col-sm-12 col-md-12 col-lg-8 col-xl-8">
              <div class="input-group mt-2 mb-2">
                <span
                  class="glassmorphism-search-input input-group-text bi bi-search"
                ></span>
                <input
                  type="text"
                  id="url_input"
                  class="glassmorphism-search-input form-control"
                  placeholder="Type a URL"
                />
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row main-row">
        <div class="col-sm-12 col-md-12 col-lg-1 col-lg-1">
          <div class="glassmorphism-website-icons mt-2 mb-2">
            <a href="https://ue.instructure.com/login/canvas">
              <i class="bi bi-book-fill"></i>
            </a>
            <a href="https://mail.google.com">
              <i class="bi bi-envelope-at-fill"></i
            ></a>
            <a href="https://messenger.com"> <i class="bi bi-messenger"></i></a>
            <a href="https://chat.openai.com"> <i class="bi bi-robot"></i></a>
            <a href="https://youtube.com"> <i class="bi bi-youtube"></i></a>
          </div>
        </div>
        <div class="col-sm-12 col-md-12 col-lg-11 col-lg-11">
          <div class="row">
            <div class="col-sm-12 col-md-12 col-lg-4 col-lg-4">
              <div class="glassmorphism-music-player mt-2 mb-2">
                <div class="main-music-title">Music Player</div>
                <img src="Photos/drake_album_two.jpg" class="img music-image" />
                <div class="music-title">Passionfruit</div>
                <div class="music-author">Drake</div>
                <div>
                  <audio controls id="audio-player">
                    <source src="" type="audio/mpeg" />
                  </audio>
                </div>
                <div>
                  <button
                    id="shuffle-button"
                    class="music-player-buttons bi bi-shuffle"
                  ></button
                  ><button
                    id="previous-button"
                    class="music-player-buttons bi bi-skip-backward-circle-fill"
                  ></button
                  ><button
                    id="play-button"
                    class="music-player-buttons bi bi-play-circle-fill"
                  ></button
                  ><button
                    id="forward-button"
                    class="music-player-buttons bi bi-skip-forward-circle-fill"
                  ></button
                  ><button
                    id="repeat-button"
                    class="music-player-buttons bi bi-repeat"
                  ></button>
                </div>

                <div class="music-lists">
                  <ul id="music-list"></ul>
                </div>
              </div>
            </div>
            <div class="col-sm-12 col-md-12 col-lg-8 col-lg-8">
              <div class="row">
                <div class="col-sm-12 col-md-12 col-lg-6 col-lg-6">
                  <div class="glassmorphism-news mt-2 mb-2">
                    <div class="main-title-news">Daily News</div>
                    <div id="title-news"></div>
                    <div id="news-paragraph"></div>
                  </div>
                </div>
                <div class="col-sm-12 col-md-12 col-lg-6 col-lg-6">
                  <div class="glassmorphism-clock mt-2 mb-2">
                    <div class="city-country">Manila, Philippines</div>
                    <div id="clock"></div>
                    <div id="date"></div>
                    <div id="day-of-week"></div>
                    <div id="quote"></div>
                    <div id="author"></div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-12 col-md-12 col-lg-12 col-lg-12">
                  <div class="glassmorphism-weather mt-2 mb-2">
                    <a
                      class="weatherwidget-io"
                      href="https://forecast7.com/en/14d60120d98/manila/"
                      data-label_1="Manila, Philippines"
                      data-label_2="Weather Forecast"
                      data-font="Roboto"
                      data-icons="Climacons Animated"
                      >Manila, Philippines Weather Forecast</a
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>

  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
    crossorigin="anonymous"
  ></script>
  <script
    src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
    integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
    crossorigin="anonymous"
  ></script>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
    integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
    crossorigin="anonymous"
  ></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="Javascript/website_url.js"></script>
  <script src="Javascript/google_search.js"></script>
  <script src="Javascript/news_daily.js"></script>
  <script src="Javascript/clock.js"></script>
  <script src="Javascript/weather_widget.js"></script>
  <script src="Javascript/quotes.js"></script>

  <script>
    const musicList = document.getElementById("music-list");
    const audioPlayer = document.getElementById("audio-player");
    const playButton = document.getElementById("play-button");
    const previousButton = document.getElementById("previous-button");
    const forwardButton = document.getElementById("forward-button");
    const shuffleButton = document.getElementById("shuffle-button");
    const repeatButton = document.getElementById("repeat-button");

    let musicFiles = [];
    let currentSongIndex = 0; // Keep track of the currently playing song
    let isShuffle = false;
    let isRepeat = false;

    fetch("Music") // Assuming the music folder is in your root directory
      .then((response) => response.text())
      .then((data) => {
        const parser = new DOMParser();
        const htmlDocument = parser.parseFromString(data, "text/html");
        const fileLinks = htmlDocument.querySelectorAll("a");

        // ...
        fileLinks.forEach((link) => {
          const fileName = link.textContent.split(".").slice(0, -1).join(".");

          // Exclude the current directory entry (denoted as '.')
          if (fileName !== "." && !fileName.endsWith("/") && fileName !== "") {
            const title = decodeURIComponent(fileName);

            musicFiles.push({ title, fileName });
            const li = document.createElement("li");
            li.textContent = title.replace(/^\d+\s*/, "");
            li.style.cursor = "pointer"; // Make the list items clickable
            li.addEventListener("click", () => playMusic(fileName));
            musicList.appendChild(li);
          }
        });
        // ...
      })
      .catch((error) => console.error("Error fetching music list:", error));

    function playMusic(fileName) {
      const musicFile = musicFiles.find((file) => file.fileName === fileName);
      if (musicFile) {
        currentSongIndex = musicFiles.findIndex(
          (file) => file.fileName === fileName
        );
        audioPlayer.src = `music/${encodeURIComponent(fileName)}.mp3`;
        audioPlayer.play();
      }
    }

    playButton.addEventListener("click", () => {
      if (audioPlayer.paused) {
        audioPlayer.play();
        playButton.classList.remove("bi-play-circle-fill");
        playButton.classList.add("bi-pause-circle-fill");
      } else {
        audioPlayer.pause();
        playButton.classList.remove("bi-pause-circle-fill");
        playButton.classList.add("bi-play-circle-fill");
      }
    });

    previousButton.addEventListener("click", () => {
      if (currentSongIndex > 0) {
        currentSongIndex--;
        playMusic(musicFiles[currentSongIndex].fileName);
        console.log("currentSongIndex");
      }
    });

    forwardButton.addEventListener("click", () => {
      if (currentSongIndex < musicFiles.length - 1) {
        currentSongIndex++;
        playMusic(musicFiles[currentSongIndex].fileName);
      }
    });

    // Function to play the next song
    function playNextSong() {
      if (currentSongIndex < musicFiles.length - 1) {
        currentSongIndex++;
        playMusic(musicFiles[currentSongIndex].fileName);
      }
    }

    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]]; // Swap elements at i and j
      }
      return array;
    }

    if (isRepeat == false) {
      audioPlayer.addEventListener("ended", playNextSong);
      shuffleButton.addEventListener("click", () => {
        isShuffle = !isShuffle;
        if (isShuffle == true) {
          musicFiles = shuffleArray(musicFiles); // Shuffle the songs
          shuffleButton.classList.remove("bi-shuffle");
          shuffleButton.classList.add("bi-arrow-right");
          console.log("Shuffle");
        } else if (isShuffle == false) {
          audioPlayer.addEventListener("ended", playNextSong);
          shuffleButton.classList.remove("bi-arrow-right");
          shuffleButton.classList.add("bi-shuffle");
          console.log("Next Song");
        }
      });
    }

    repeatButton.addEventListener("click", () => {
      isRepeat = !isRepeat;
      audioPlayer.loop = isRepeat; // Enable or disable song looping
      if (isRepeat == true) {
        // If repeat is enabled, play the current song again
        audioPlayer.play();
        repeatButton.classList.remove("bi-repeat");
        repeatButton.classList.add("bi-repeat-1");
        console.log("Repeat");
      } else if (isRepeat == false) {
        audioPlayer.addEventListener("ended", playNextSong);
        repeatButton.classList.remove("bi-repeat-1");
        repeatButton.classList.add("bi-repeat");
        console.log("Next Song");
      }
    });
  </script>
</html>
